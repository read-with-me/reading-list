# 객체지향과 인지 능력

사람은 어릴 적부터 뚜렷한 경계를 가진 객체들의 집합으로 세상을 바라본다. 여기서 많은 사람이 객체지향이 직관적이라고 하는 이유는 객체지향이 세상을 자율적이고 독립적인 객체들로 분해할 수 있는 인간의 기본적인 인지 능력에 기반을 두고 있기 때문이다.

인간의 인지 능력은 물리적인 한계를 넘어 개념적으로 경계 지을 수 있는 추상적인 사물까지도 객체로 인식할 수 있게 한다. 즉, 객체란 인간이 분명하게 구별할 수 있는 물리적 또는 개념적 경계를 지닌 어떤 것이다.

하지만 객체지향 패러다임의 목적은 현실을 모방하는 것이 아닌, 현실 세계를 기반으로 새로운 세계를 창조하는 것이다. 따라서 소프트웨어의 객체는 현실의 객체와는 다른 모습을 띤다.

# 이상한 나라의 앨리스

앨리스는 문을 통과하기 위해 자신의 몸 크기를 딱 맞추려고 다양한 행동을 했다. 특정 음료를 마셔서 몸을 작게 만들었고, 케이크를 먹어 몸의 크기를 키웠다. 또 토끼의 부채질을 통해 몸의 크기를 줄이고, 버섯을 먹어서 크기를 다시 조정했다. 앨리스는 이러한 과정을 통해 문을 통과할 수 있었다.

# 앨리스라는 객체

앨리스의 키를 변화시키는 것은 앨리스의 행동이다. 앨리스의 행동에 따라 앨리스의 상태가 변한다. 하지만 여기서 앨리스의 상태를 결정하는 것은 행동이지만, 행동의 결과를 결정하는 것은 상태이다.

간단한 예를 들어, 앨리스가 200센티미터일 때 부채질을 해서 100센티미터가 줄었다고 가정하자. 그러면 앨리스는 부채질을 하고 나서 100센티미터가 될 것이다. 위의 예에서 볼 수 있듯, 앨리스의 “키”라는 상태를 결정해 주는 것은 행동이지만, 기존의 앨리스의 키가 얼마였는지가 행동의 결과를 결정한다. 즉, 행동의 결과는 상태에 의존적이다.

또한, 앨리스가 몸을 통과시키기 위해 하는 행동들의 순서도 중요하다. 문을 통과하는 행동이 선행되려면 음료나 케이크를 먹는 행동이 먼저 이루어져야 한다.

그리고 앨리스는 상태가 어떻게 바뀌든지 하나의 독립적이고 유일한 존재로서 식별된다. 이제부터 이 예시를 객체에 대입하여 적용해 보자.

# 객체

객체의 다양한 특성을 효과적으로 설명하기 위해 객체를 상태, 행동, 식별자를 지닌 실체로 보기로 한다. 이 책에서는 객체를 다음과 같이 정의한다.

**객체란 식별 가능한 개체 또는 사물이다. 객체는 자동차처럼 만질 수 있는 구체적인 사물일 수도 있고, 시간처럼 추상적인 개념일 수도 있다. 객체는 구별 가능한 식별자, 특징적인 행동, 변경 가능한 상태를 가진다. 소프트웨어 안에서 객체는 저장된 상태와 실행 가능한 코드를 통해 구현된다.**

# 상태

위에서도 앨리스의 예시에서 봤듯이, 객체의 행동 결과는 상태에 의존적이다. 상태를 이용하면 과거에 얽매이지 않고 현재를 기반으로 객체의 행동 방식을 이해할 수 있다. 하지만 세상에 존재하는 모든 것이 객체인 것은 아니다. 분명하게 인식이 가능함에도 객체가 될 수 없는 것들이 있다. 바로 단순한 값들이다. 예를 들어 숫자, 시간, 속도, 양 등의 단순한 값은 객체의 상태를 표현하기 위해 사용한다.

때로는 객체를 사용해서 다른 객체의 상태를 표현해야 할 때가 종종 있다. 따라서 상태란 단순한 값과 객체의 조합으로 표현이 가능하다. 결론적으로 모든 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다. 이때 객체의 상태를 구성하는 모든 특징을 통틀어 Property(프로퍼티)라고 하고, 프로퍼티는 일반적으로 변하지 않고 고정되어 있기 때문에 정적이다. 반면, 프로퍼티 값은 시간의 흐름에 따라 변경되기 때문에 동적이다.

객체와 객체 사이의 의미 있는 연결을 링크라고 하는데, 링크는 객체가 다른 객체를 참조할 수 있다는 것을 의미하며, 이는 일반적으로 한 객체가 다른 객체의 식별자를 알고 있는 것으로 표현된다. 객체를 구성하는 단순한 값은 속성이라고 한다. 예를 들어, 앨리스의 키와 위치는 단순한 값으로 표현되기 때문에 속성이다. 객체의 프로퍼티는 단순한 값인 속성과 다른 객체를 가리키는 링크라는 두 가지 종류의 조합으로 표현된다.

# 자율적인 객체

객체는 다른 객체의 상태에 직접적으로 접근할 수도, 상태를 변경할 수도 없다. 자율적인 객체는 스스로 자신의 상태를 책임져야 한다. 그렇다면 간접적으로 객체의 상태를 변경하거나 조회할 수 있어야 하는데, 바로 이 방법이 행동이다. 행동은 객체의 상태를 변경하는 것을 가능하게 한다.

객체의 상태는 저절로 변경되지 않고, 객체의 상태를 변경하는 것은 객체의 자발적인 행동뿐이다. 또한, 객체의 행동은 객체의 상태를 변경시키지만 행동의 결과는 객체의 상태에 의존적이다.

# 협력과 행동

객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다. 객체가 어떤 행동을 하도록 만드는 것은 객체가 외부로부터 수신한 메시지이다. 객체는 수신한 메시지에 따라 적절히 행동하고 협력하면서 그 결과로 자신의 상태를 변경한다. 또한, 객체의 행동은 다른 객체의 상태 변경을 유발할 수도 있다.

•	객체 자신의 상태 변경

•	행동 내에서 협력하는 다른 객체에 대한 메시지 전송

앨리스의 세계에서는 음료는 아무것도 할 수 없는 존재였으나, 객체지향의 세계에서는 모든 객체가 자신의 상태를 스스로 관리하는 자율적인 존재이다. 즉, 음료의 양을 줄이는 것은 메시지를 전달받은 음료 스스로의 몫이다.

참고로 메시지 송신자는 메시지 수신자의 상태 변경에 대해서는 전혀 알지 못한다. 왜냐하면 객체의 상태를 다루는 것은 객체 자신이기 때문이다. 이것이 캡슐화가 의미하는 것이다. 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않으며, 객체가 외부로 노출하는 것은 행동뿐이고, 외부에서 객체로 접근할 수 있는 방법 역시 유일하게 행동뿐이다.

# 식별자

객체는 식별이 가능한데, 이는 객체를 서로 구별할 수 있는 특정한 프로퍼티가 객체 안에 존재한다는 것을 의미한다. 이 프로퍼티를 식별자라고 한다. 모든 객체는 식별자를 가지기 때문에 객체가 아닌 값은 식별자를 가지지 않는다는 것을 의미하기도 한다.

값은 상태가 같은지를 이용해서 판단하는데, 상태를 통해 두 값이 같은지를 판단할 수 있는 성질을 동등성(equality)라고 한다. 값은 상태가 변하지 않기 때문에 이 성질이 유효하지만, 반면에 객체는 시간에 따라 변경되는 상태를 포함하며, 행동을 통해 상태를 변경한다. 따라서 객체는 가변 상태를 가지며, 식별자를 기반으로 객체가 같은지를 판단할 수 있는 성질을 동일성이라고 한다.

# 기계로서의 객체

객체의 상태를 조회하는 작업을 Query(쿼리)라고 하며, 객체의 상태를 변경하는 작업을 Command(명령)이라고 한다. 사용자는 객체 기계의 버튼을 눌러서 상태를 변경하고 상태 조회를 요청하는데, 이는 객체의 행동을 유발하기 위해 메시지를 전송하는 것과 유사하다.

명령과 쿼리는 객체가 외부에 제공하는 행동이다. 여기서 중요한 것은 명령 버튼과 쿼리 버튼 이외의 다른 방법을 통해서는 기계를 사용할 수 없다는 것이다. 사용자는 명령 버튼을 눌러야만 상태를 변경할 수 있고, 조회 버튼을 눌러야만 상태를 조회할 수 있다.

이는 객체에 접근할 수 있는 유일한 방법은 객체가 제공하는 행동뿐임을 강조한다. 즉, 사용자는 객체가 제공하는 명령 버튼과 쿼리 버튼으로 구성된 인터페이스를 통해서만 객체에 접근할 수 있다.

# 행동이 상태를 결정한다

상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 미친다.

1.	상태를 먼저 결정하는 경우 캡슐화가 저해된다.
2.	객체를 협력자가 아닌 고립된 섬으로 만든다.
3.	객체의 재사용성이 저하된다.

우리는 설계자로서 협력의 문맥에 맞는 적절한 행동을 수행하는 객체를 발견하거나 창조해야 한다. 결과적으로 애플리케이션에서 어떤 행동을 원하느냐가 어떤 객체가 적합한지를 결정한다. 즉, 객체의 적합성은 행동이 결정한다.