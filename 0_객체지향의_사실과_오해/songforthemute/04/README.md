## 04. 역할, 책임, 협력

#### 전통적 경제학: 인간을 이기적이고 합리적인 존재로 가정.

> 이 관점에서 인간은 자신에게 최대 이익이 돌아오도록 합리적으로 의사 결정을 내린다.
>
> 그러나 최후통첩 게임에서는 타인과의 관계에서 인간이 자신의 이익을 최소화하는 비합리적 선택을 하기도 한다.
>
> 즉, 인간의 본질적 특성보다 처한 상황이 행동을 결정하며, 개인이 처한 문맥(context)이 행동 방식을 좌우한다.

#### 객체의 세계에서도 문맥이 객체의 행동 방식을 결정.

> 객체지향 설계에서 중요한 것은 개별 객체가 아니라 객체들 간의 협력이다.
>
> 협력의 품질이 객체지향 설계의 품질을 결정하며, 협력 속에서 객체의 행동이 자연스럽게 드러난다.
>
> 협력 속에서 객체의 상태가 결정된다.

#### 협력이 객체의 행동을 형성:

> 객체가 참여하는 협력이 객체의 행동과 상태를 결정한다.
>
> 협력의 본질은 요청과 응답의 네트워크이다.
>
> 요청자는 스스로 해결이 어려운 문제에 도움을 요청하고, 응답자는 요청한 사람에게 필요한 지식이나 서비스를 제공한다.
>
> 협력은 다수의 연쇄적 요청과 응답으로 이루어진다.

#### 책임: 객체지향 설계에서 가장 중요한 요소.

> 크레이그 라만: "객체지향 개발의 가장 중요한 능력은 책임을 적절히 객체에 할당하는 것."
>
> 책임을 성급하게 구현하면 변경에 취약해지고 다양한 협력에 참여할 수 없는 비자율적 객체가 된다.
>
> 책임은 객체가 외부에 제공할 수 있는 정보와 서비스 목록을 의미하며, 객체의 공용 인터페이스를 구성한다.

#### 협력 속에서 객체는 요청을 수신한 경우에만 책임을 수행:

> 객체는 다른 객체로부터의 요청을 통해 자신의 책임을 수행한다.
> 메시지 전송: 객체가 다른 객체에게 책임을 수행하도록 요청을 보내는 것.
>
> > 요청을 전송한 객체는 송신자, 요청을 처리하는 객체는 수신자라고 한다.
> >
> > 메시지는 객체 간 협력을 위한 유일한 통로이다.
> >
> > 책임은 객체가 협력 속에서 수행할 수 있는 행동을 의미하며, 메시지는 두 객체 간의 관계를 나타낸다.

#### 책임과 메시지의 수준 차이:

> 책임은 협력 속에서 객체가 수행해야 할 상위 수준의 행위를 서술한다.
>
> 하나의 책임이 여러 개의 메시지로 분할되기도 한다.

#### 역할(Role): 객체가 협력 속에서 수행하는 책임의 집합을 암시한다.

> 역할은 협력의 추상화를 가능하게 한다.
>
> 역할을 사용하면 다양한 객체가 동일한 협력에 유연하게 참여할 수 있다.
>
> 객체가 역할을 대체하려면 행동이 호환되어야 하며, 그 역할의 모든 책임을 수행할 수 있어야 한다.

#### 역할은 행위 호환성을 기반으로 단순성, 유연성, 재사용성을 높여준다.

> 역할을 통해 구체적인 객체를 추상화하여 협력의 복잡성을 줄일 수 있다.
>
> 객체가 존재하는 이유는 행위를 통해 협력에 참여하기 위함이며, 협력 설계는 객체의 책임 할당에서 시작된다.

#### 책임-주도 설계(Responsibility-Driven Design):

> 레베카 워프스브룩이 제안한 방법으로, 객체의 책임을 중심으로 시스템을 구축하는 방식.
>
> 시스템의 책임을 객체에게 할당하고, 객체들 간의 협력 관계를 구축하는 방식이다.
>
> 시스템을 자율적이고 협조적인 객체들로 구성된 생태계로 만든다.

#### 디자인 패턴(Design Pattern):

> 책임-주도 설계의 결과로 나타나는 모범 설계.
>
> 반복적으로 발생하는 문제에 대한 해법을 제공하며, 역할, 책임, 협력의 템플릿 역할을 한다.

#### 테스트-주도 개발(Test-Driven Development, TDD):

> 실패하는 테스트를 먼저 작성하고, 그 테스트를 통과하는 가장 단순한 코드를 작성한 후 리팩터링을 통해 중복을 제거하는 방식.
>
> 테스트는 객체의 역할과 책임에 대한 기대를 코드로 표현하는 과정이다.
>
> TDD는 책임-주도 설계의 원칙과 패턴을 적용하는 기법이다.
